<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"></meta><title>ConsumePulsarRecord</title><link rel="stylesheet" href="../../../../../css/component-usage.css" type="text/css"></link></head><script type="text/javascript">window.onload = function(){if(self==top) { document.getElementById('nameHeader').style.display = "inherit"; } }</script><body><h1 id="nameHeader" style="display: none;">ConsumePulsarRecord</h1><h2>Description: </h2><p>Consumes messages from Apache Pulsar. The complementary NiFi processor for sending messages is PublishPulsarRecord. Please note that, at this time, the Processor assumes that all records that are retrieved have the same schema. If any of the Pulsar messages that are pulled but cannot be parsed or written with the configured Record Reader or Record Writer, the contents of the message will be written to a separate FlowFile, and that FlowFile will be transferred to the 'parse.failure' relationship. Otherwise, each FlowFile is sent to the 'success' relationship and may contain many individual messages within the single FlowFile. A 'record.count' attribute is added to indicate how many messages are contained in the FlowFile. No two Pulsar messages will be placed into the same FlowFile if they have different schemas.</p><h3>Tags: </h3><p>Pulsar, Get, Record, csv, avro, json, Ingest, Ingress, Topic, PubSub, Consume</p><h3>Properties: </h3><p>In the list below, the names of required properties appear in <strong>bold</strong>. Any other properties (not in bold) are considered optional. The table also indicates any default values, and whether a property supports the <a href="../../../../../html/expression-language-guide.html">NiFi Expression Language</a>.</p><table id="properties"><tr><th>Name</th><th>Default Value</th><th>Allowable Values</th><th>Description</th></tr><tr><td id="name"><strong>Record Reader</strong></td><td id="default-value"></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>RecordReaderFactory<br/><strong>Implementations: </strong><a href="../../../../../components/org.apache.nifi/nifi-scripting-nar/1.9.2/org.apache.nifi.record.script.ScriptedReader/index.html">ScriptedReader</a><br/><a href="../../../../../components/org.apache.nifi/nifi-record-serialization-services-nar/1.9.2/org.apache.nifi.xml.XMLReader/index.html">XMLReader</a><br/><a href="../../../../../components/org.apache.nifi/nifi-record-serialization-services-nar/1.9.2/org.apache.nifi.json.JsonPathReader/index.html">JsonPathReader</a><br/><a href="../../../../../components/org.apache.nifi/nifi-record-serialization-services-nar/1.9.2/org.apache.nifi.avro.AvroReader/index.html">AvroReader</a><br/><a href="../../../../../components/org.apache.nifi/nifi-record-serialization-services-nar/1.9.2/org.apache.nifi.syslog.Syslog5424Reader/index.html">Syslog5424Reader</a><br/><a href="../../../../../components/org.apache.nifi/nifi-record-serialization-services-nar/1.9.2/org.apache.nifi.syslog.SyslogReader/index.html">SyslogReader</a><br/><a href="../../../../../components/org.apache.nifi/nifi-record-serialization-services-nar/1.9.2/org.apache.nifi.grok.GrokReader/index.html">GrokReader</a><br/><a href="../../../../../components/org.apache.nifi/nifi-record-serialization-services-nar/1.9.2/org.apache.nifi.json.JsonTreeReader/index.html">JsonTreeReader</a><br/><a href="../../../../../components/org.apache.nifi/nifi-record-serialization-services-nar/1.9.2/org.apache.nifi.csv.CSVReader/index.html">CSVReader</a></td><td id="description">The Record Reader to use for incoming FlowFiles</td></tr><tr><td id="name"><strong>Record Writer</strong></td><td id="default-value"></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>RecordSetWriterFactory<br/><strong>Implementations: </strong><a href="../../../../../components/org.apache.nifi/nifi-record-serialization-services-nar/1.9.2/org.apache.nifi.xml.XMLRecordSetWriter/index.html">XMLRecordSetWriter</a><br/><a href="../../../../../components/org.apache.nifi/nifi-record-serialization-services-nar/1.9.2/org.apache.nifi.text.FreeFormTextRecordSetWriter/index.html">FreeFormTextRecordSetWriter</a><br/><a href="../../../../../components/org.apache.nifi/nifi-record-serialization-services-nar/1.9.2/org.apache.nifi.avro.AvroRecordSetWriter/index.html">AvroRecordSetWriter</a><br/><a href="../../../../../components/org.apache.nifi/nifi-scripting-nar/1.9.2/org.apache.nifi.record.script.ScriptedRecordSetWriter/index.html">ScriptedRecordSetWriter</a><br/><a href="../../../../../components/org.apache.nifi/nifi-record-serialization-services-nar/1.9.2/org.apache.nifi.csv.CSVRecordSetWriter/index.html">CSVRecordSetWriter</a><br/><a href="../../../../../components/org.apache.nifi/nifi-record-serialization-services-nar/1.9.2/org.apache.nifi.json.JsonRecordSetWriter/index.html">JsonRecordSetWriter</a></td><td id="description">The Record Writer to use in order to serialize the data before sending to Pulsar</td></tr><tr><td id="name"><strong>Max Wait Time</strong></td><td id="default-value">2 seconds</td><td id="allowable-values"></td><td id="description">The maximum amount of time allowed for a Pulsar consumer to poll a subscription for data , zero means there is no limit. Max time less than 1 second will be equal to zero.<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name"><strong>Pulsar Client Service</strong></td><td id="default-value"></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>PulsarClientService<br/><strong>Implementation: </strong><a href="../../../../../components/org.apache.nifi/nifi-pulsar-nar/1.9.0/org.apache.nifi.pulsar.StandardPulsarClientService/index.html">StandardPulsarClientService</a></td><td id="description">Specified the Pulsar Client Service that can be used to create Pulsar connections</td></tr><tr><td id="name">Topic Names</td><td id="default-value"></td><td id="allowable-values"></td><td id="description">Specify the topics this consumer will subscribe on. You can specify multiple topics in a comma-separated list.E.g topicA, topicB, topicC <br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name">Topics Pattern</td><td id="default-value"></td><td id="allowable-values"></td><td id="description">Alternatively, you can specify a pattern for topics that this consumer will subscribe on. It accepts a regular expression and will be compiled into a pattern internally. E.g. "persistent://my-tenant/ns-abc/pattern-topic-.*" would subscribe to any topic whose name started with 'pattern-topic-' that was in the 'ns-abc' namespace, and belonged to the 'my-tenant' tentant.</td></tr><tr><td id="name"><strong>Subscription Name</strong></td><td id="default-value"></td><td id="allowable-values"></td><td id="description">Specify the subscription name for this consumer.</td></tr><tr><td id="name">Consumer Name</td><td id="default-value"></td><td id="allowable-values"></td><td id="description">Set the name of the consumer to uniquely identify this client on the Broker</td></tr><tr><td id="name"><strong>Async Enabled</strong></td><td id="default-value">false</td><td id="allowable-values"><ul><li>true</li><li>false</li></ul></td><td id="description">Control whether the messages will be consumed asyncronously or not. Messages consumed syncronously will be acknowledged immediately before processing the next message, while asyncronous messages will be acknowledged after the Pulsar broker responds. 
Enabling asyncronous message consumption introduces the possibility of duplicate data consumption in the case where the Processor is stopped before it has time to send an acknowledgement back to the Broker. In this scenario, the Broker would assume that the un-acknowledged message was not successuflly processed and re-send it when the Processor restarted.</td></tr><tr><td id="name">Maximum Async Requests</td><td id="default-value">50</td><td id="allowable-values"></td><td id="description">The maximum number of outstanding asynchronous consumer requests for this processor. Each asynchronous call requires memory, so avoid setting this value to high.</td></tr><tr><td id="name">Acknowledgment Timeout</td><td id="default-value">30 sec</td><td id="allowable-values"></td><td id="description">Set the timeout for unacked messages. Messages that are not acknowledged within the configured timeout will be replayed. This value needs to be greater than 10 seconds.</td></tr><tr><td id="name">Consumer Priority Level</td><td id="default-value">5</td><td id="allowable-values"></td><td id="description">Sets priority level for the shared subscription consumers to which broker gives more priority while dispatching messages. Here, broker follows descending priorities. (eg: 0=max-priority, 1, 2,..) </td></tr><tr><td id="name">Consumer Receiver Queue Size</td><td id="default-value">1000</td><td id="allowable-values"></td><td id="description">The consumer receive queue controls how many messages can be accumulated by the Consumer before the application calls Consumer.receive(). Using a higher value could potentially increase the consumer throughput at the expense of bigger memory utilization. 
Setting the consumer queue size as zero, 
	 - Decreases the throughput of the consumer, by disabling pre-fetching of messages. 
	 - Doesn't support Batch-Message: if consumer receives any batch-message then it closes consumer connection with broker and consumer will not be able receive any further message unless batch-message in pipeline is removed</td></tr><tr><td id="name"><strong>Subscription Type</strong></td><td id="default-value">Shared</td><td id="allowable-values"><ul><li>Exclusive <img src="../../../../../html/images/iconInfo.png" alt="There can be only 1 consumer on the same topic with the same subscription name" title="There can be only 1 consumer on the same topic with the same subscription name"></img></li><li>Shared <img src="../../../../../html/images/iconInfo.png" alt="Multiple consumer will be able to use the same subscription name and the messages" title="Multiple consumer will be able to use the same subscription name and the messages"></img></li><li>Failover <img src="../../../../../html/images/iconInfo.png" alt="Multiple consumer will be able to use the same subscription name but only 1 consumer will receive the messages. If that consumer disconnects, one of the other connected consumers will start receiving messages." title="Multiple consumer will be able to use the same subscription name but only 1 consumer will receive the messages. If that consumer disconnects, one of the other connected consumers will start receiving messages."></img></li></ul></td><td id="description">Select the subscription type to be used when subscribing to the topic.</td></tr><tr><td id="name">Consumer Message Batch Size</td><td id="default-value">1000</td><td id="allowable-values"></td><td id="description">Set the maximum number of messages consumed at a time, and published to a single FlowFile. default: 1000. If set to a value greater than 1, messages within the FlowFile will be seperated by the Message Demarcator.<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name"><strong>Message Demarcator</strong></td><td id="default-value">
</td><td id="allowable-values"></td><td id="description">Specifies the string (interpreted as UTF-8) to use for demarcating multiple messages consumed from Pulsar within a single FlowFile. If not specified, the content of the FlowFile will consist of all of the messages consumed from Pulsar concatenated together. If specified, the contents of the individual Pulsar messages will be separate by this delimiter. To enter special character such as 'new line' use CTRL+Enter or Shift+Enter, depending on your OS.<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr></table><h3>Relationships: </h3><table id="relationships"><tr><th>Name</th><th>Description</th></tr><tr><td>success</td><td>FlowFiles for which all content was consumed from Pulsar.</td></tr><tr><td>parse_failure</td><td>FlowFiles for which the content cannot be parsed.</td></tr></table><h3>Reads Attributes: </h3>None specified.<h3>Writes Attributes: </h3><table id="writes-attributes"><tr><th>Name</th><th>Description</th></tr><tr><td>record.count</td><td>The number of records received</td></tr></table><h3>State management: </h3>This component does not store state.<h3>Restricted: </h3>This component is not restricted.<h3>Input requirement: </h3>This component does not allow an incoming relationship.<h3>System Resource Considerations:</h3>None specified.<h3>See Also:</h3><p><a href="../../../../../components/org.apache.nifi/nifi-pulsar-nar/1.9.0/org.apache.nifi.processors.pulsar.pubsub.PublishPulsar/index.html">PublishPulsar</a>, <a href="../../../../../components/org.apache.nifi/nifi-pulsar-nar/1.9.0/org.apache.nifi.processors.pulsar.pubsub.ConsumePulsar/index.html">ConsumePulsar</a>, <a href="../../../../../components/org.apache.nifi/nifi-pulsar-nar/1.9.0/org.apache.nifi.processors.pulsar.pubsub.PublishPulsarRecord/index.html">PublishPulsarRecord</a></p></body></html>